import{r as a,e as g,u as b,o as v,j as e,L as j,R as L,O,A as N,f as u,g as d,Q as o}from"./index-8ae3b2fc.js";const w=()=>{const[n,m]=a.useState(""),{dispatch:i}=g(),{state:t}=b(),[l,c]=a.useState(!1),[x,p]=a.useState(!1),f=v();a.useEffect(()=>{const r=async()=>{p(!0);try{await u.post(`${d}/api/auth/forget-password`,{email:t==null?void 0:t.email})}catch(s){s.response?o(s.response.data.message,{position:"bottom-left",autoClose:5e3,pauseOnHover:!1,type:"error",theme:"colored"}):o("Please check your internet connection",{position:"bottom-left",autoClose:5e3,pauseOnHover:!1,type:"error",theme:"colored"})}finally{p(!1)}};t!=null&&t.email&&r()},[t]);const h=async r=>{r.preventDefault();try{c(!0);const s={email:t.email,code:n},y=await u.post(`${d}/api/auth/verify`,s);i({type:"SET_TOKEN",payload:y.data.data.token}),i({type:"SET_IS_LOGGED_IN",state:!0}),f("/",{replace:!0})}catch(s){s.response?o(s.response.data.message,{position:"bottom-left",autoClose:5e3,pauseOnHover:!1,type:"error",theme:"colored"}):o("Please check your internet connection",{position:"bottom-left",autoClose:5e3,pauseOnHover:!1,type:"error",theme:"colored"})}finally{c(!1)}};return x?e.jsx(j,{}):e.jsxs(L.Fragment,{children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("h2",{className:"font-bold text-2xl sm:text-4xl text-gray-900 capitalize",children:"verify your account"})}),e.jsx("p",{className:"py-4 text-base text-center sm:text-xl",children:"We have sent a verification code to your email, please paste it here to complete the account creation process"}),e.jsxs("form",{onSubmit:h,children:[e.jsx(O,{valueLength:4,otp:n,setOtp:m}),e.jsx("div",{className:"flex justify-center gap-4 pt-4 items-center",children:e.jsx("button",{disabled:l,className:"flex justify-center items-center w-1/2 max-w-xs disabled:cursor-wait disabled:hover:scale-100 disabled:bg-primary/80 text-2xl uppercase mx-auto bg-primary hover:bg-primary/80 transition-all duration-300 hover:scale-105 text-white rounded-lg px-3 py-2 font-semibold",children:l?e.jsx(N,{className:"text-4xl text-center animate-spin"}):e.jsx("span",{children:"verify"})})})]})]})};export{w as default};
